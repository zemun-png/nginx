pipeline {
    agent any
    stages {
        stage('Build Images') {
            steps {
                sh 'docker rm my_nginx -f'
                sh 'docker image rm mynginx:latest '
                sh 'docker build -t mynginx:latest .'
            }
            post {
                success {
                    echo "images build successfull ..."
                }
            }
        }
        stage('Create container On Dev Envornment ...'){
            steps {
                sh "docker-compose up -d"
            }
         }
      }
    agent {label 'linux'}
    stages {
	stage('Build Images on Stage') {
            steps {
                sh 'docker rm my_nginx -f'
                sh 'docker image rm mynginx:latest '
                sh 'docker build -t mynginx:latest .'
            }
            post {
                success {
                    echo "images build successfull ..."
                }
            }
        }

        stage('Create container On stage Envornment ...'){
            steps {
                sh "docker-compose up -d"
            }
         }
    }
}
